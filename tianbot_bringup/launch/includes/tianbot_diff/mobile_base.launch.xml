<?xml version="1.0"?>

<launch>
  <arg name="serial_port" />
  <arg name="serial_baudrate" />
  <arg name="robot_name" />
  <arg name="type" default="diff" />
  <arg name="type_verify" default="true" />
  <arg name="base_frame" default="base_footprint" />
  <arg name="odom_frame" default="odom"/>

  <node pkg="tianbot_core" type="tianbot_core" name="tianbot_core" output="screen">
    <param name="serial_port" type="string" value="$(arg serial_port)"/>
    <param name="serial_baudrate" type="int" value="$(arg serial_baudrate)"/>
    <param name="type" type="string" value="$(arg type)"/>
    <param name="type_verify" type="bool" value="$(arg type_verify)"/>
    <param name="base_frame" type="string" value="$(arg base_frame)"/>
    <param name="odom_frame" type="string" value="$(arg odom_frame)"/>
    
    <param unless="$(eval robot_name=='/')" name="base_frame" type="string" value="$(arg robot_name)/$(arg base_frame)"/>
    <param unless="$(eval robot_name=='/')" name="odom_frame" type="string" value="$(arg robot_name)/$(arg odom_frame)"/>

    <remap from="tianbot_core/imu" to="imu" />
    <remap from="tianbot_core/odom" to="odom" />
    <remap from="tianbot_core/cmd_vel" to="cmd_vel" />
    <remap from="tianbot_core/uwb" to="uwb" /> 
  </node>
</launch>
